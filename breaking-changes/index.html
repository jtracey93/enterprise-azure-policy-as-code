
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://azure.github.io/enterprise-azure-policy-as-code/breaking-changes/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../quick-start/">
      
      <link rel="icon" href="../Images/10316-icon-service-Policy.svg">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.17">
    
    
      
        <title>Breaking Changes - Enterprise Policy As Code (EPAC)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#breaking-changes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Enterprise Policy As Code (EPAC)" class="md-header__button md-logo" aria-label="Enterprise Policy As Code (EPAC)" data-md-component="logo">
      
  <img src="../Images/10316-icon-service-Policy.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Enterprise Policy As Code (EPAC)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Breaking Changes
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Azure/enterprise-azure-policy-as-code" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Breaking Changes
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../quick-start/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../ci-cd-pipeline/" class="md-tabs__link">
        CI/CD Integration
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../integrating-with-alz/" class="md-tabs__link">
      CAF Azure Landing Zones
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../policy-definitions/" class="md-tabs__link">
        Policy Objects
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../documenting-assignments-and-policy-sets/" class="md-tabs__link">
      Documenting Policy Objects
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../operational-scripts/" class="md-tabs__link">
      Operational Scripts
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Enterprise Policy As Code (EPAC)" class="md-nav__button md-logo" aria-label="Enterprise Policy As Code (EPAC)" data-md-component="logo">
      
  <img src="../Images/10316-icon-service-Policy.svg" alt="logo">

    </a>
    Enterprise Policy As Code (EPAC)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Azure/enterprise-azure-policy-as-code" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Breaking Changes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Breaking Changes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#breaking-changes-in-v70" class="md-nav__link">
    Breaking changes in v7.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-changes-in-v60" class="md-nav__link">
    Breaking changes in v6.0
  </a>
  
    <nav class="md-nav" aria-label="Breaking changes in v6.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changed-az-cli-to-az-powershell-modules" class="md-nav__link">
    Changed az cli to Az PowerShell Modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommendation-to-simplify-github-flow" class="md-nav__link">
    Recommendation to Simplify GitHub Flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renamed-definitions-folders" class="md-nav__link">
    Renamed Definitions Folders
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replaced-suppressdelete-switch-with-desired-state-handling" class="md-nav__link">
    Replaced -SuppressDelete Switch with Desired State Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replaced-includeresourcegroups-switch-with-desired-state-handling" class="md-nav__link">
    Replaced -IncludeResourceGroups Switch with Desired State Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-changes-in-global-settingsjsonc" class="md-nav__link">
    Multiple Changes in global-settings.jsonc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centralized-documentation-in-docs-folder" class="md-nav__link">
    Centralized Documentation in Docs folder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microsoft-breaking-change-in-implementation-of-get-azroleassignment" class="md-nav__link">
    Microsoft Breaking Change in Implementation of  Get-AzRoleAssignment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quick-start/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operating-environment/" class="md-nav__link">
        Operating Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          PowerShell Scripts (options)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          PowerShell Scripts (options)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clone-github/" class="md-nav__link">
        Cloning the Project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../powershell-module/" class="md-nav__link">
        PowerShell Module
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../desired-state-strategy/" class="md-nav__link">
        Desired State Strategy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../definitions-and-global-settings/" class="md-nav__link">
        Global Settings and Definitions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../extract-existing-policy-resources/" class="md-nav__link">
        Extracting Existing Policy Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tips/" class="md-nav__link">
        Tips
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          CI/CD Integration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          CI/CD Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-pipeline/" class="md-nav__link">
        CI/CD Pipeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../github-actions/" class="md-nav__link">
        GitHub Actions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../integrating-with-alz/" class="md-nav__link">
        CAF Azure Landing Zones
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Policy Objects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Policy Objects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy-definitions/" class="md-nav__link">
        Policy Definitions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy-set-definitions/" class="md-nav__link">
        Policy Set Definitions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy-assignments/" class="md-nav__link">
        Policy Assignments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy-exemptions/" class="md-nav__link">
        Policy Exemptions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../documenting-assignments-and-policy-sets/" class="md-nav__link">
        Documenting Policy Objects
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../operational-scripts/" class="md-nav__link">
        Operational Scripts
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#breaking-changes-in-v70" class="md-nav__link">
    Breaking changes in v7.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-changes-in-v60" class="md-nav__link">
    Breaking changes in v6.0
  </a>
  
    <nav class="md-nav" aria-label="Breaking changes in v6.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changed-az-cli-to-az-powershell-modules" class="md-nav__link">
    Changed az cli to Az PowerShell Modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommendation-to-simplify-github-flow" class="md-nav__link">
    Recommendation to Simplify GitHub Flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renamed-definitions-folders" class="md-nav__link">
    Renamed Definitions Folders
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replaced-suppressdelete-switch-with-desired-state-handling" class="md-nav__link">
    Replaced -SuppressDelete Switch with Desired State Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replaced-includeresourcegroups-switch-with-desired-state-handling" class="md-nav__link">
    Replaced -IncludeResourceGroups Switch with Desired State Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-changes-in-global-settingsjsonc" class="md-nav__link">
    Multiple Changes in global-settings.jsonc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centralized-documentation-in-docs-folder" class="md-nav__link">
    Centralized Documentation in Docs folder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microsoft-breaking-change-in-implementation-of-get-azroleassignment" class="md-nav__link">
    Microsoft Breaking Change in Implementation of  Get-AzRoleAssignment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="breaking-changes">Breaking changes</h1>
<h2 id="breaking-changes-in-v70">Breaking changes in v7.0</h2>
<p>Script <code>Export-AzPolicyResources</code> replaces <code>Build-PolicyDefinitionFolder</code> with a <a href="../extract-existing-policy-resources/">substantial increase in capability</a>. It has a round-trip capability supporting the extract to be used in the build <code>Definitions</code>.</p>
<p>Introducing a new approach using PowerShell Module. This not (actually) breaking existing implementation since you can continue as is; however, for a simplified usage of EPAC, the PowerShell module is the best approach.</p>
<p>The move from synchronizing your repo with the GitHub repo to a PowerShell module necessitated the reworking of the default values for <code>Definitions</code>, <code>Output</code>, and <code>Input</code> folders. Many scripts use parameters for definitions, input and output folders. They default to the current directory, which should be the root of the repo. make sure that the current directory is the root of your repo. We recommend that you do one of the following approaches instead of accepting the default:</p>
<ul>
<li>Set the environment variables <code>PAC_DEFINITIONS_FOLDER</code>, <code>PAC_OUTPUT_FOLDER</code>, and <code>PAC_INPUT_FOLDER</code>.</li>
<li>Use the script parameters <code>-definitionsRootFolder</code>, <code>-outputFolder</code>, and <code>-inputFolder</code> (They vary by script).</li>
</ul>
<h2 id="breaking-changes-in-v60">Breaking changes in v6.0</h2>
<h3 id="changed-az-cli-to-az-powershell-modules">Changed az cli to Az PowerShell Modules</h3>
<p>To increase execution speed and pipeline uniformity:</p>
<ul>
<li>Replaced az cli usage with faster Resource Graph queries and AZ PowerShell Modules.</li>
<li>Simplified the cmdlets naming.</li>
<li>Simplified parameters</li>
<li>Removed -SuppressDeletes flag</li>
<li>Changed handling of plan files</li>
<li>Support to write pipeline variables for GitLab</li>
</ul>
<p>Change pipeline definition:</p>
<ul>
<li>Change usage of task: <code>AzureCLI@2</code> to task: <code>AzurePowerShell@5</code>. Use <code>-devOpsType "ado"</code> for Azure DevOps or <code>-devOpsType "gitlab"</code> for Gitlab pipelines.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzurePowerShell@5</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">planStep</span>
<span class="w">      </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Plan</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">        </span><span class="nt">azureSubscription</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$(devServiceConnection)</span>
<span class="w">        </span><span class="nt">pwsh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">azurePowerShellVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LatestVersion</span>
<span class="w">        </span><span class="nt">ScriptPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Scripts/Deploy/Build-DeploymentPlans.ps1&quot;</span>
<span class="w">        </span><span class="nt">ScriptArguments</span><span class="p">:</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">-pacEnvironmentSelector $(pacEnvironmentSelector) `</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">-devOpsType &quot;ado&quot; `</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">-InformationAction Continue</span>
</code></pre></div>
<ul>
<li>Changed command line arguments as needed</li>
<li>Change command names in pipeline definition</li>
<li><code>Build-AzPoliciesInitiativesAssignmentsPlan.ps1</code> to <code>Build-DeploymentPlans.ps1</code></li>
<li><code>Deploy-AzPoliciesInitiativesAssignmentsFromPlan.ps1</code> to <code>Deploy-PolicyPlan.ps1</code></li>
<li><code>Set-AzPolicyRolesFromPlan.ps1</code> to <code>Deploy-RolesPlan.ps1</code></li>
<li>Fix the artifact up/downloads occurrences by replacing the publish and artifact line items with:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">publish</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$(PAC_OUTPUT_FOLDER)/plans-$(pacEnvironmentSelector)&quot;</span>
<span class="w">      </span><span class="nt">artifact</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;plans-$(pacEnvironmentSelector)&quot;</span>
<span class="w">      </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">and(succeeded(), or(eq(variables[&#39;planStep.deployPolicyChanges&#39;], &#39;yes&#39;), eq(variables[&#39;planStep.deployRoleChanges&#39;], &#39;yes&#39;)))</span>
</code></pre></div>
<h3 id="recommendation-to-simplify-github-flow">Recommendation to Simplify GitHub Flow</h3>
<p>We have found that the additional test environment after a Pull Request merge does not lead to finding problems; therefore, we removed that stage from the starter kit pipelines as seen in our <a href="../ci-cd-pipeline/#simplified-github-flow-for-policy-as-code">CI/CD Pipeline documentation</a>.</p>
<h3 id="renamed-definitions-folders">Renamed <code>Definitions</code> Folders</h3>
<p>Renamed definition folders to match Microsoft's standard naming in our Policy repo on GitHub. Rename the folders in your repo to:</p>
<ul>
<li>policyDefinitions</li>
<li>policySetDefinitions</li>
<li>policyAssignments</li>
<li>policyExemptions</li>
<li>policyDocumentations</li>
</ul>
<h3 id="replaced-suppressdelete-switch-with-desired-state-handling">Replaced <code>-SuppressDelete</code> Switch with Desired State Handling</h3>
<p>As part of the support for <a href="../desired-state-strategy/">multiple EPAC (and other PaC) solutions to manage Policy in a tenant(s)</a>, we changed our approach to "brownfield" scenarios. The setting has moved to <code>global-settings.jsonc</code>.</p>
<p>Remove the command line switch <code>-SuppressDelete</code> in the pipeline and the <code>brownfield</code> variable. The equivalent in <code>global-settings.jsonc</code> is:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;desiredState&quot;</span><span class="p">:</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;strategy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ownedOnly&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="replaced-includeresourcegroups-switch-with-desired-state-handling">Replaced <code>-IncludeResourceGroups</code> Switch with Desired State Handling</h3>
<p>As part of the support for <a href="../desired-state-strategy/">multiple EPAC (and other PaC) solutions to manage Policy in a tenant(s)</a>, we changed our approach to including resource groups in desired state. Without any modifications, Resource Group level assignments are not managed by EPAC to preserve previous behavior.</p>
<p>Remove the command line switch <code>-IncludeResourceGroups</code> in the pipeline. The equivalent in <code>global-settings.jsonc</code> is:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;desiredState&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;includeResourceGroups&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="multiple-changes-in-global-settingsjsonc">Multiple Changes in <code>global-settings.jsonc</code></h3>
<ul>
<li>Simplify and clarify <code>"rootScope"</code> definition by replaceing <code>"rootScope": { "ManagementGroupName": "my-mg"}</code> with <code>"deploymentRootScope": "/providers/Microsoft.Management/managementGroups/my-mg"</code>.</li>
<li>Removed requirement to have a default subscription. Remove <code>"defaultSubscriptionId"</code> element from <code>global-settings.jsonc</code>.</li>
<li>Support for multiple EPAC (and other PaC) solutions to manage Policy. Add required <code>"pacOwnerId": "e6581a31-51a3-4dc6-806d-2541dc251d31"</code>.</li>
<li>Add element for <a href="../desired-state-strategy/">desired state handling</a> as needed.</li>
</ul>
<h3 id="centralized-documentation-in-docs-folder">Centralized Documentation in Docs folder</h3>
<p>Instead of README.md files in multiple folders, move all content from <code>README.md</code> files not at the solution root to the <code>Docs</code> folder.</p>
<p>Remove <code>README.md</code> files in folders (and subfolders) <code>Pipeline</code>, <code>Definitions</code>, and <code>Scripts</code>.</p>
<h3 id="microsoft-breaking-change-in-implementation-of-get-azroleassignment">Microsoft Breaking Change in Implementation of  <code>Get-AzRoleAssignment</code></h3>
<p>The implementation was changed from Azure AD to MS Graph API impacting the roles requirements for the cmdlet. This changed the implementation of <code>New-AzPolicyReaderRole.ps1</code>. Add required <code>MS Graph</code> <a href="../ci-cd-pipeline/#ms-graph-permissions">permissions for the pipeline service connections</a>.</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.indexes", {"navigation.sections": {"level": 1}}, "navigation.tabs", "navigation.tabs.sticky", "content.code.annotate", "content.tabs.link", "content.code.copy"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b425cdc4.min.js"></script>
      
    
  </body>
</html>